<VirtualHost *:80>

  ServerAdmin d.m.heggo@ub.uio.no
  DocumentRoot /opt/data.ub/www/default

  RewriteEngine On

  # redirect to RDF for Linked Data agents
  RewriteCond %{HTTP_ACCEPT} application/rdf\+xml  [OR]
  RewriteCond %{HTTP_ACCEPT} text/turtle           [OR]
  RewriteCond %{HTTP_ACCEPT} application/ld\+json  [OR]
  RewriteCond %{HTTP_ACCEPT} application/json
  RewriteRule ^/(realfagstermer|humord|mrtermer|tekord|ddc)/(.*) 'http://data.ub.uio.no/skosmos/rest/v1/$1/data?uri=http://data.ub.uio.no/$1/$2' [R=303,L]

  # redirect to HTML for everyone else
  RewriteRule ^/(realfagstermer|humord|mrtermer|tekord|ddc)/$    http://data.ub.uio.no/skosmos/$1/        [R=303,L]
  RewriteRule ^/(realfagstermer|humord|mrtermer|tekord|ddc)/(.*) http://data.ub.uio.no/skosmos/$1/page/$2 [R=303,L]

  <Directory /opt/data.ub/www/default/>
    Options Indexes FollowSymLinks
    AllowOverride All
    Order deny,allow
    Allow from all
  </Directory>

  # ErrorLog /error.log
  # CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>